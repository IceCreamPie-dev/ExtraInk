<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ExtraInk: ExtraInk 설정 시스템 가이드</title>
<link rel="icon" href="webDeulPieLogo.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="webDeulPieLogo.png"/></td>
  <td id="projectalign">
   <div id="projectname">ExtraInk<span id="projectnumber">&#160;2.1</span>
   </div>
   <div id="projectbrief">이야기 게임을 더 쉽게 만들수 있도록</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__d_1_2_projects_2_team___hajen_2_i_c_p_d_e_v___ink_2_assets_2_deul_pie_2_extra_ink_2_document74cfaeac793d4d52a45c924a6d933887.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ExtraInk 설정 시스템 가이드 </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="extraink-설정-시스템-가이드"></a></p>
<p>다양한 저장 방식을 지원하여 플랫폼별로 최적화된 설정 관리를 제공합니다.</p>
<h1 class="doxsection"><a class="anchor" id="목차"></a>
목차</h1>
<ol type="1">
<li>시스템 개요</li>
<li>저장소 타입</li>
<li>사용법</li>
<li>플랫폼별 최적화</li>
<li>빌드 시 자동 구성</li>
<li>마이그레이션</li>
</ol>
<hr  />
<h1 class="doxsection"><a class="anchor" id="시스템-개요"></a>
시스템 개요</h1>
<p>ExtraInk 설정 시스템은 <span class="tt">ISettingsStorage</span> 인터페이스를 통해 다양한 저장 방식을 추상화하여 제공합니다. 플랫폼별로 최적화된 저장소를 자동으로 선택하거나 수동으로 지정할 수 있습니다.</p>
<h2 class="doxsection"><a class="anchor" id="핵심-특징"></a>
핵심 특징</h2>
<ul>
<li><b>플랫폼 최적화</b>: 각 플랫폼에 가장 적합한 저장 방식 자동 선택</li>
<li><b>타입 안전성</b>: 제네릭을 통한 강타입 설정 관리</li>
<li><b>암호화 지원</b>: 민감한 설정을 위한 암호화 저장소</li>
<li><b>빌드 자동화</b>: 빌드 시 플랫폼별 자동 구성</li>
<li><b>마이그레이션</b>: 저장소 간 설정 이전 지원</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="저장소-타입"></a>
저장소 타입</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1-registry-storage-windows-전용"></a>
1. Registry Storage (Windows 전용)</h2>
<p>Windows 레지스트리를 사용하여 설정을 저장합니다.</p>
<p><b>장점:</b></p><ul>
<li>Windows 표준 설정 저장 방식</li>
<li>시스템 통합성이 뛰어남</li>
<li>빠른 액세스 속도</li>
</ul>
<p><b>단점:</b></p><ul>
<li>Windows 전용</li>
<li>관리자 권한이 필요할 수 있음</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">// 수동 생성</span></div>
<div class="line">var storage = <span class="keyword">new</span> RegistrySettingsStorage(<span class="stringliteral">&quot;MyGame&quot;</span>);</div>
<div class="line">storage.SaveSetting(<span class="stringliteral">&quot;volume&quot;</span>, 0.8f);</div>
<div class="line"><span class="keywordtype">float</span> volume = storage.LoadSetting(<span class="stringliteral">&quot;volume&quot;</span>, 1.0f);</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md2-json-file-storage-크로스-플랫폼"></a>
2. JSON File Storage (크로스 플랫폼)</h2>
<p>JSON 파일을 사용하여 설정을 저장합니다.</p>
<p><b>장점:</b></p><ul>
<li>모든 플랫폼 지원</li>
<li>사람이 읽기 쉬운 형태</li>
<li>디버깅이 용이</li>
</ul>
<p><b>단점:</b></p><ul>
<li>보안성이 낮음</li>
<li>파일 크기가 클 수 있음</li>
</ul>
<div class="fragment"><div class="line">var storage = <span class="keyword">new</span> JsonFileSettingsStorage(<span class="stringliteral">&quot;settings.json&quot;</span>);</div>
<div class="line">storage.SaveSetting(<span class="stringliteral">&quot;language&quot;</span>, <span class="stringliteral">&quot;ko&quot;</span>);</div>
<div class="line"><span class="keywordtype">string</span> language = storage.LoadSetting(<span class="stringliteral">&quot;language&quot;</span>, <span class="stringliteral">&quot;en&quot;</span>);</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md3-encrypted-file-storage-보안-중요"></a>
3. Encrypted File Storage (보안 중요)</h2>
<p>암호화된 파일을 사용하여 설정을 저장합니다.</p>
<p><b>장점:</b></p><ul>
<li>높은 보안성</li>
<li>모든 플랫폼 지원</li>
<li>민감한 정보 보호</li>
</ul>
<p><b>단점:</b></p><ul>
<li>성능 오버헤드</li>
<li>키 관리 필요</li>
</ul>
<div class="fragment"><div class="line">var storage = <span class="keyword">new</span> EncryptedFileSettingsStorage(<span class="stringliteral">&quot;secure_settings.dat&quot;</span>, <span class="stringliteral">&quot;my_encryption_key&quot;</span>);</div>
<div class="line">storage.SaveSetting(<span class="stringliteral">&quot;user_token&quot;</span>, <span class="stringliteral">&quot;secret_token_value&quot;</span>);</div>
<div class="line"><span class="keywordtype">string</span> token = storage.LoadSetting(<span class="stringliteral">&quot;user_token&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md4-playerprefs-storage-unity-기본"></a>
4. PlayerPrefs Storage (Unity 기본)</h2>
<p>Unity PlayerPrefs를 사용하여 설정을 저장합니다.</p>
<p><b>장점:</b></p><ul>
<li>Unity 기본 제공</li>
<li>WebGL 완전 지원</li>
<li>간단한 사용법</li>
</ul>
<p><b>단점:</b></p><ul>
<li>제한적인 데이터 타입</li>
<li>플랫폼별 제약사항</li>
</ul>
<div class="fragment"><div class="line">var storage = <span class="keyword">new</span> PlayerPrefsSettingsStorage(<span class="stringliteral">&quot;MyGame_&quot;</span>);</div>
<div class="line">storage.SaveSetting(<span class="stringliteral">&quot;music_enabled&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="keywordtype">bool</span> musicEnabled = storage.LoadSetting(<span class="stringliteral">&quot;music_enabled&quot;</span>, <span class="keyword">true</span>);</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="사용법"></a>
사용법</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1-자동-최적화-저장소-사용-권장"></a>
1. 자동 최적화 저장소 사용 (권장)</h2>
<div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="namespace_deul_pie_1_1_extra_ink_1_1_core_1_1_settings.html">DeulPie.ExtraInk.Core.Settings</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>GameSettings : MonoBehaviour</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">private</span> <a class="code hl_interface" href="interface_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_i_settings_storage.html">ISettingsStorage</a> _storage;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">void</span> Awake()</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// 플랫폼에 최적화된 저장소 자동 선택</span></div>
<div class="line">        _storage = SettingsStorageFactory.CreateOptimalStorage();</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> SaveVolume(<span class="keywordtype">float</span> volume)</div>
<div class="line">    {</div>
<div class="line">        _storage.SaveSetting(<span class="stringliteral">&quot;master_volume&quot;</span>, volume);</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">float</span> LoadVolume()</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> _storage.LoadSetting(<span class="stringliteral">&quot;master_volume&quot;</span>, 1.0f);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="ainterface_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_i_settings_storage_html"><div class="ttname"><a href="interface_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_i_settings_storage.html">DeulPie.ExtraInk.Core.Settings.ISettingsStorage</a></div><div class="ttdoc">설정 저장소 인터페이스 - 다양한 저장 방식을 추상화</div><div class="ttdef"><b>Definition</b> ISettingsStorage.cs:10</div></div>
<div class="ttc" id="anamespace_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_html"><div class="ttname"><a href="namespace_deul_pie_1_1_extra_ink_1_1_core_1_1_settings.html">DeulPie.ExtraInk.Core.Settings</a></div><div class="ttdef"><b>Definition</b> EncryptedFileSettingsStorage.cs:9</div></div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md2-특정-저장소-강제-사용"></a>
2. 특정 저장소 강제 사용</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> Awake()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// JSON 파일 저장소 강제 사용</span></div>
<div class="line">    _storage = SettingsStorageFactory.CreateOptimalStorage(<a class="code hl_enumeration" href="namespace_deul_pie_1_1_extra_ink_1_1_core_1_1_settings.html#aad544e2b8d229dcd84e7ff8bf06d6221">SettingsStorageType</a>.JsonFile);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// 또는 직접 생성</span></div>
<div class="line">    _storage = <span class="keyword">new</span> <a class="code hl_class" href="class_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_json_file_settings_storage.html">JsonFileSettingsStorage</a>(<span class="stringliteral">&quot;my_settings.json&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="aclass_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_json_file_settings_storage_html"><div class="ttname"><a href="class_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_json_file_settings_storage.html">DeulPie.ExtraInk.Core.Settings.JsonFileSettingsStorage</a></div><div class="ttdoc">JSON 파일 기반 설정 저장소 macOS, Linux에서 주로 사용</div><div class="ttdef"><b>Definition</b> JsonFileSettingsStorage.cs:34</div></div>
<div class="ttc" id="anamespace_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_html_aad544e2b8d229dcd84e7ff8bf06d6221"><div class="ttname"><a href="namespace_deul_pie_1_1_extra_ink_1_1_core_1_1_settings.html#aad544e2b8d229dcd84e7ff8bf06d6221">DeulPie.ExtraInk.Core.Settings.SettingsStorageType</a></div><div class="ttdeci">SettingsStorageType</div><div class="ttdoc">설정 저장소 타입</div><div class="ttdef"><b>Definition</b> SettingsStorageFactory.cs:105</div></div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md3-복합-데이터-타입-저장"></a>
3. 복합 데이터 타입 저장</h2>
<div class="fragment"><div class="line">[System.Serializable]</div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>GraphicsSettings</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">int</span> resolution_width;</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">int</span> resolution_height;</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">bool</span> fullscreen;</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">int</span> quality_level;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 복합 객체 저장</span></div>
<div class="line">GraphicsSettings graphics = <span class="keyword">new</span> GraphicsSettings </div>
<div class="line">{</div>
<div class="line">    resolution_width = 1920,</div>
<div class="line">    resolution_height = 1080,</div>
<div class="line">    fullscreen = <span class="keyword">true</span>,</div>
<div class="line">    quality_level = 3</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">_storage.SaveSetting(<span class="stringliteral">&quot;graphics&quot;</span>, graphics);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 복합 객체 로드</span></div>
<div class="line">GraphicsSettings loadedGraphics = _storage.LoadSetting&lt;GraphicsSettings&gt;(<span class="stringliteral">&quot;graphics&quot;</span>);</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md4-설정-검증-및-관리"></a>
4. 설정 검증 및 관리</h2>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span>SettingsManager : MonoBehaviour</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">private</span> <a class="code hl_interface" href="interface_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_i_settings_storage.html">ISettingsStorage</a> _storage;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">void</span> Start()</div>
<div class="line">    {</div>
<div class="line">        _storage = SettingsStorageFactory.CreateOptimalStorage();</div>
<div class="line">        ValidateSettings();</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">void</span> ValidateSettings()</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// 필수 설정들이 존재하는지 확인</span></div>
<div class="line">        <span class="keywordflow">if</span> (!_storage.HasSetting(<span class="stringliteral">&quot;language&quot;</span>))</div>
<div class="line">        {</div>
<div class="line">            _storage.SaveSetting(<span class="stringliteral">&quot;language&quot;</span>, GetSystemLanguage());</div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">if</span> (!_storage.HasSetting(<span class="stringliteral">&quot;master_volume&quot;</span>))</div>
<div class="line">        {</div>
<div class="line">            _storage.SaveSetting(<span class="stringliteral">&quot;master_volume&quot;</span>, 1.0f);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> ResetAllSettings()</div>
<div class="line">    {</div>
<div class="line">        _storage.ClearAllSettings();</div>
<div class="line">        ValidateSettings();</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">string</span> GetSystemLanguage()</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">switch</span> (Application.systemLanguage)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">case</span> SystemLanguage.Korean: <span class="keywordflow">return</span> <span class="stringliteral">&quot;ko&quot;</span>;</div>
<div class="line">            <span class="keywordflow">case</span> SystemLanguage.Japanese: <span class="keywordflow">return</span> <span class="stringliteral">&quot;ja&quot;</span>;</div>
<div class="line">            <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;en&quot;</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="플랫폼별-최적화"></a>
플랫폼별 최적화</h1>
<h2 class="doxsection"><a class="anchor" id="windows"></a>
Windows</h2>
<ul>
<li><b>1순위</b>: Registry Storage</li>
<li><b>2순위</b>: JSON File Storage</li>
<li><b>3순위</b>: Encrypted File Storage</li>
<li><b>4순위</b>: PlayerPrefs Storage</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">// Windows에서 자동 선택됨</span></div>
<div class="line">var storage = SettingsStorageFactory.CreateOptimalStorage();</div>
<div class="line"><span class="comment">// → RegistrySettingsStorage 반환</span></div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="macos--linux"></a>
macOS / Linux</h2>
<ul>
<li><b>1순위</b>: JSON File Storage</li>
<li><b>2순위</b>: Encrypted File Storage</li>
<li><b>3순위</b>: PlayerPrefs Storage</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">// macOS/Linux에서 자동 선택됨</span></div>
<div class="line">var storage = SettingsStorageFactory.CreateOptimalStorage();</div>
<div class="line"><span class="comment">// → JsonFileSettingsStorage 반환</span></div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="android--ios"></a>
Android / iOS</h2>
<ul>
<li><b>1순위</b>: Encrypted File Storage</li>
<li><b>2순위</b>: JSON File Storage</li>
<li><b>3순위</b>: PlayerPrefs Storage</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">// 모바일에서 자동 선택됨</span></div>
<div class="line">var storage = SettingsStorageFactory.CreateOptimalStorage();</div>
<div class="line"><span class="comment">// → EncryptedFileSettingsStorage 반환</span></div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="webgl"></a>
WebGL</h2>
<ul>
<li><b>유일한 선택</b>: PlayerPrefs Storage</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">// WebGL에서 자동 선택됨</span></div>
<div class="line">var storage = SettingsStorageFactory.CreateOptimalStorage();</div>
<div class="line"><span class="comment">// → PlayerPrefsSettingsStorage 반환</span></div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="빌드-시-자동-구성"></a>
빌드 시 자동 구성</h1>
<h2 class="doxsection"><a class="anchor" id="build-pre-process-script"></a>
Build Pre-Process Script</h2>
<div class="fragment"><div class="line"><span class="keyword">using </span>UnityEngine;</div>
<div class="line"><span class="keyword">using </span>UnityEditor;</div>
<div class="line"><span class="keyword">using </span>UnityEditor.Build;</div>
<div class="line"><span class="keyword">using </span>UnityEditor.Build.Reporting;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>SettingsStorageBuildProcessor : IPreprocessBuildWithReport</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">int</span> callbackOrder =&gt; 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> OnPreprocessBuild(BuildReport report)</div>
<div class="line">    {</div>
<div class="line">        ConfigureOptimalStorage(report.summary.platform);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> ConfigureOptimalStorage(BuildTarget target)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">string</span> configPath = <span class="stringliteral">&quot;Assets/Resources/SettingsConfig.json&quot;</span>;</div>
<div class="line">        SettingsConfig config = <span class="keyword">new</span> SettingsConfig();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">switch</span> (target)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">case</span> BuildTarget.StandaloneWindows:</div>
<div class="line">            <span class="keywordflow">case</span> BuildTarget.StandaloneWindows64:</div>
<div class="line">                config.storageType = <span class="stringliteral">&quot;Registry&quot;</span>;</div>
<div class="line">                config.encryptionEnabled = <span class="keyword">false</span>;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">case</span> BuildTarget.StandaloneOSX:</div>
<div class="line">            <span class="keywordflow">case</span> BuildTarget.StandaloneLinux64:</div>
<div class="line">                config.storageType = <span class="stringliteral">&quot;JsonFile&quot;</span>;</div>
<div class="line">                config.encryptionEnabled = <span class="keyword">false</span>;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">case</span> BuildTarget.Android:</div>
<div class="line">            <span class="keywordflow">case</span> BuildTarget.iOS:</div>
<div class="line">                config.storageType = <span class="stringliteral">&quot;EncryptedFile&quot;</span>;</div>
<div class="line">                config.encryptionEnabled = <span class="keyword">true</span>;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">case</span> BuildTarget.WebGL:</div>
<div class="line">                config.storageType = <span class="stringliteral">&quot;PlayerPrefs&quot;</span>;</div>
<div class="line">                config.encryptionEnabled = <span class="keyword">false</span>;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">string</span> json = JsonUtility.ToJson(config, <span class="keyword">true</span>);</div>
<div class="line">        System.IO.File.WriteAllText(configPath, json);</div>
<div class="line">        AssetDatabase.Refresh();</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">[System.Serializable]</div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>SettingsConfig</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">string</span> storageType;</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">bool</span> encryptionEnabled;</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">string</span> customConfigPath;</div>
<div class="line">}</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="runtime-configuration-loader"></a>
Runtime Configuration Loader</h2>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class </span>BuildTimeSettingsConfigurator</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <a class="code hl_interface" href="interface_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_i_settings_storage.html">ISettingsStorage</a> CreateConfiguredStorage()</div>
<div class="line">    {</div>
<div class="line">        SettingsConfig config = LoadBuildTimeConfig();</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">if</span> (config != <span class="keyword">null</span>)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">switch</span> (config.storageType)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">case</span> <span class="stringliteral">&quot;Registry&quot;</span>:</div>
<div class="line">                    <span class="keywordflow">return</span> <span class="keyword">new</span> RegistrySettingsStorage();</div>
<div class="line">                <span class="keywordflow">case</span> <span class="stringliteral">&quot;JsonFile&quot;</span>:</div>
<div class="line">                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_json_file_settings_storage.html">JsonFileSettingsStorage</a>();</div>
<div class="line">                <span class="keywordflow">case</span> <span class="stringliteral">&quot;EncryptedFile&quot;</span>:</div>
<div class="line">                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_encrypted_file_settings_storage.html">EncryptedFileSettingsStorage</a>();</div>
<div class="line">                <span class="keywordflow">case</span> <span class="stringliteral">&quot;PlayerPrefs&quot;</span>:</div>
<div class="line">                    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="class_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_player_prefs_settings_storage.html">PlayerPrefsSettingsStorage</a>();</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// 빌드 시 구성이 없으면 런타임 최적화 사용</span></div>
<div class="line">        <span class="keywordflow">return</span> SettingsStorageFactory.CreateOptimalStorage();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">static</span> SettingsConfig LoadBuildTimeConfig()</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            TextAsset configAsset = Resources.Load&lt;TextAsset&gt;(<span class="stringliteral">&quot;SettingsConfig&quot;</span>);</div>
<div class="line">            <span class="keywordflow">if</span> (configAsset != <span class="keyword">null</span>)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">return</span> JsonUtility.FromJson&lt;SettingsConfig&gt;(configAsset.text);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span> (System.Exception ex)</div>
<div class="line">        {</div>
<div class="line">            Debug.LogWarning($<span class="stringliteral">&quot;Failed to load build-time settings config: {ex.Message}&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_encrypted_file_settings_storage_html"><div class="ttname"><a href="class_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_encrypted_file_settings_storage.html">DeulPie.ExtraInk.Core.Settings.EncryptedFileSettingsStorage</a></div><div class="ttdoc">암호화된 파일 기반 설정 저장소 민감한 설정을 안전하게 저장 (모바일 등)</div><div class="ttdef"><b>Definition</b> EncryptedFileSettingsStorage.cs:15</div></div>
<div class="ttc" id="aclass_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_player_prefs_settings_storage_html"><div class="ttname"><a href="class_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_player_prefs_settings_storage.html">DeulPie.ExtraInk.Core.Settings.PlayerPrefsSettingsStorage</a></div><div class="ttdoc">PlayerPrefs 기반 설정 저장소 Unity 기본 제공, WebGL 등에서 사용</div><div class="ttdef"><b>Definition</b> PlayerPrefsSettingsStorage.cs:10</div></div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="마이그레이션"></a>
마이그레이션</h1>
<h2 class="doxsection"><a class="anchor" id="저장소-간-설정-이전"></a>
저장소 간 설정 이전</h2>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class </span>SettingsMigrator</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> MigrateSettings(<a class="code hl_interface" href="interface_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_i_settings_storage.html">ISettingsStorage</a> from, <a class="code hl_interface" href="interface_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_i_settings_storage.html">ISettingsStorage</a> to, <span class="keywordtype">string</span>[] settingKeys)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">foreach</span> (<span class="keywordtype">string</span> key <span class="keywordflow">in</span> settingKeys)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (from.HasSetting(key))</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// 타입별 마이그레이션 수행</span></div>
<div class="line">                MigrateSetting(from, to, key);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        from.FlushSettings();</div>
<div class="line">        to.FlushSettings();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">void</span> MigrateSetting(ISettingsStorage from, ISettingsStorage to, <span class="keywordtype">string</span> key)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// 다양한 타입들을 시도해서 마이그레이션</span></div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// String 시도</span></div>
<div class="line">            <span class="keywordflow">if</span> (TryMigrate&lt;string&gt;(from, to, key)) <span class="keywordflow">return</span>;</div>
<div class="line">            </div>
<div class="line">            <span class="comment">// Int 시도</span></div>
<div class="line">            <span class="keywordflow">if</span> (TryMigrate&lt;int&gt;(from, to, key)) <span class="keywordflow">return</span>;</div>
<div class="line">            </div>
<div class="line">            <span class="comment">// Float 시도</span></div>
<div class="line">            <span class="keywordflow">if</span> (TryMigrate&lt;float&gt;(from, to, key)) <span class="keywordflow">return</span>;</div>
<div class="line">            </div>
<div class="line">            <span class="comment">// Bool 시도</span></div>
<div class="line">            <span class="keywordflow">if</span> (TryMigrate&lt;bool&gt;(from, to, key)) <span class="keywordflow">return</span>;</div>
<div class="line">            </div>
<div class="line">            Debug.LogWarning($<span class="stringliteral">&quot;Failed to migrate setting: {key}&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span> (System.Exception ex)</div>
<div class="line">        {</div>
<div class="line">            Debug.LogError($<span class="stringliteral">&quot;Migration error for {key}: {ex.Message}&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">bool</span> TryMigrate&lt;T&gt;(ISettingsStorage from, ISettingsStorage to, <span class="keywordtype">string</span> key)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            T value = from.LoadSetting&lt;T&gt;(key);</div>
<div class="line">            <span class="keywordflow">if</span> (value != <span class="keyword">null</span> || !value.Equals(<span class="keywordflow">default</span>(T)))</div>
<div class="line">            {</div>
<div class="line">                to.SaveSetting(key, value);</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span></div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// 이 타입이 아님</span></div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 사용 예제</span></div>
<div class="line"><span class="keywordtype">void</span> MigrateFromPlayerPrefsToJson()</div>
<div class="line">{</div>
<div class="line">    var oldStorage = <span class="keyword">new</span> <a class="code hl_class" href="class_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_player_prefs_settings_storage.html">PlayerPrefsSettingsStorage</a>();</div>
<div class="line">    var newStorage = <span class="keyword">new</span> <a class="code hl_class" href="class_deul_pie_1_1_extra_ink_1_1_core_1_1_settings_1_1_json_file_settings_storage.html">JsonFileSettingsStorage</a>();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">string</span>[] settingsToMigrate = {</div>
<div class="line">        <span class="stringliteral">&quot;master_volume&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;sfx_volume&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;language&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;graphics_quality&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;fullscreen&quot;</span></div>
<div class="line">    };</div>
<div class="line">    </div>
<div class="line">    SettingsMigrator.MigrateSettings(oldStorage, newStorage, settingsToMigrate);</div>
<div class="line">}</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="버전별-설정-업그레이드"></a>
버전별 설정 업그레이드</h2>
<p>```csharp public class SettingsVersionManager { private const string VERSION_KEY = "settings_version"; private const int CURRENT_VERSION = 2;</p>
<p>public static void UpgradeSettingsIfNeeded(ISettingsStorage storage) { int currentVersion = storage.LoadSetting(VERSION_KEY, 1);</p>
<p>if (currentVersion &lt; CURRENT_VERSION) { PerformUpgrade(storage, currentVersion, CURRENT_VERSION); storage.SaveSetting(VERSION_KEY, CURRENT_VERSION); } }</p>
<p>static void PerformUpgrade(ISettingsStorage storage, int fromVersion, int toVersion) { for (int version = fromVersion; version &lt; toVersion; version++) { switch (version) { case 1: UpgradeFrom1To2(storage); break; // 향후 버전 업그레이드 추가 } } }</p>
<p>static void UpgradeFrom1To2(ISettingsStorage storage) { // 예: 음량 설정을 0-100에서 0.0-1.0으로 변경 if (storage.HasSetting("volume")) { int oldVolume = storage.LoadSetting&lt;int&gt;("volume"); float newVolume = oldVolume / 100.0f; storage.SaveSetting("master_volume", newVolume); storage.DeleteSetting("volume"); } } } </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
